<?php/* * VIỆT FRAME WORK * FRAMEWORK VIỆT CHO NGƯỜI VIỆT *  * NHÓM PHÁT TRIỂN          Việt Framework Group * NĂM PHÁT TRIỂN           2014 * TRANG CHỦ                http://vietframework.com * HÒM THƯ                  admin@vietframework.com * NGÀY VIẾT                12/06/2014 * PHIÊN BẢN                2.0.0 * BẢN QUYỀN                HỆ THỐNG MÃ NGUỒN MỞ NHƯNG VUI LÒNG TÔN TRỌNG CÁC THÔNG TIN NHÓM PHÁT TRIỂN */ob_start();session_start();class maBaoVe {    private $phongChu = array(        "../../phongchu/vietFrameWork/monofont.ttf",        "../../phongchu/vietFrameWork/AntykwaBold.ttf",        "../../phongchu/vietFrameWork/Candice.ttf",        "../../phongchu/vietFrameWork/Ding-DongDaddyO.ttf",        "../../phongchu/vietFrameWork/Duality.ttf",        "../../phongchu/vietFrameWork/Heineken.ttf",        "../../phongchu/vietFrameWork/Jura.ttf",        "../../phongchu/vietFrameWork/StayPuft.ttf",        "../../phongchu/vietFrameWork/TimesNewRomanBold.ttf",        "../../phongchu/vietFrameWork/VeraSansBold.ttf");    private function taoMaBaoVeNgauNhien($kiTu) {        $tapHopKiTu = "qwertyuiopasdfghjklzxcvbnm";        $maBaoVe = "";        for ($i = 0; $i < $kiTu; $i++) {            $maBaoVe .= substr($tapHopKiTu, rand(0, strlen($tapHopKiTu) - 1), 1);        }        return $maBaoVe;    }    public function __construct($chieuRong = 120, $chieuCao = 40, $kiTu = 4, $tenTruongMaXacNhan = "dulieu", $tenDoiTuong = "dulieu") {        if (is_numeric($chieuRong) && is_numeric($chieuCao) && is_numeric($kiTu) && is_string($tenTruongMaXacNhan) && is_string($tenDoiTuong)) {            $maBaoVe = $this->taoMaBaoVeNgauNhien($kiTu);            $kichThuocChu = $chieuCao * 0.6;            $hinhMaBaoVe = imagecreate($chieuRong, $chieuCao);            imagecolorallocate($hinhMaBaoVe, 255, 255, 255);            $mauChu = imagecolorallocate($hinhMaBaoVe, rand(0, 125), rand(0, 125), rand(0, 125));            $mauVien = imagecolorallocate($hinhMaBaoVe, rand(155, 255), rand(155, 255), rand(155, 255));            /* tạo các dấu chấm ngẫu nhiên */            for ($i = 0; $i < ($chieuRong * $chieuCao) / 3; $i++) {                imagefilledellipse($hinhMaBaoVe, rand(0, $chieuRong), rand(0, $chieuCao), 1, 1, $mauVien);            }            /* tạo các đường thẳng ngẫu nhiên */            for ($i = 0; $i < ($chieuRong * $chieuCao) / 150; $i++) {                imageline($hinhMaBaoVe, rand(0, $chieuRong), rand(0, $chieuCao), rand(0, $chieuRong), rand(0, $chieuCao), $mauVien);            }            /* ghi chữ lên khung nền */            $phongChu = $this->phongChu[rand(0, count($this->phongChu) - 1)];            $khungChu = imagettfbbox($kichThuocChu, 0, $phongChu, $maBaoVe);            $x = ($chieuRong - $khungChu[4]) / 2;            $y = ($chieuCao - $khungChu[5]) / 2;            imagettftext($hinhMaBaoVe, $kichThuocChu, 0, $x, $y, $mauChu, $phongChu, $maBaoVe);            /* hiển thị ra trình duyệt */            header("Content-Type: image/jpeg");            imagejpeg($hinhMaBaoVe);            imagedestroy($hinhMaBaoVe);            $_SESSION["vietFrameWork"]["Mã Bảo Vệ"][$tenDoiTuong][$tenTruongMaXacNhan] = $maBaoVe;        }    }}$chieuRong = isset($_GET["chieuRong"]) ? $_GET["chieuRong"] : 120;$chieuCao = isset($_GET["chieuCao"]) ? $_GET["chieuCao"] : 40;$kiTu = isset($_GET["kiTu"]) ? $_GET["kiTu"] : 4;$tenTruongMaXacNhan = isset($_GET["tenTruongMaXacNhan"]) ? $_GET["tenTruongMaXacNhan"] : "dulieu";$tenDoiTuong = isset($_GET["tenDoiTuong"]) ? $_GET["tenDoiTuong"] : "dulieu";new maBaoVe($chieuRong, $chieuCao, $kiTu, $tenTruongMaXacNhan, $tenDoiTuong);?>